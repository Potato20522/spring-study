# ç¬¬äºŒç«  é™ç•Œä¸Šä¸‹æ–‡

ä»è¿™ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°±æ­¥å…¥æ­£å¼å¼€å‘äº†ï¼Œé¦–å…ˆä»¥é›¶é£Ÿå”®è´§æœºåŠŸèƒ½å»ºæ¨¡ï¼ŒæŠ•å¸ï¼Œæ‰¾é›¶å¼€å§‹ã€‚æ¸…æ™°å®šä¹‰å®ä½“å’Œå€¼å¯¹è±¡çš„ä¸åŒï¼Œä¹ å¾—å…¶æœ€ä½³å®è·µã€‚

## è¯æ±‡ä½¿ç”¨

â—é¢†åŸŸï¼šæ­£åœ¨ç€é‡è§£å†³çš„é—®é¢˜ï¼Œè½¯ä»¶é¢ä¸´çš„é—®é¢˜ã€‚
â—æœ¯è¯­é¢†åŸŸå’Œé—®é¢˜åŸŸæ˜¯ç­‰ä»·çš„ã€‚
â—æ ¸å¿ƒåŸŸæ˜¯é—®é¢˜åŸŸæˆ–åŸŸçš„å­é›†ã€‚
â—é¢†åŸŸæ¨¡å‹ï¼šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚
â—æœ¯è¯­ä¸šåŠ¡é€»è¾‘ã€ä¸šåŠ¡è§„åˆ™ã€é¢†åŸŸé€»è¾‘ã€é¢†åŸŸçŸ¥è¯†å’Œé¢†åŸŸæ¨¡å‹éƒ½æ˜¯ç­‰ä»·çš„ã€‚
å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æ˜ç¡®æœ¯è¯­çš„å«ä¹‰åŠå®šä¹‰ã€‚ä¸Šé¢çš„æœ¯è¯­ä½ å¯èƒ½ä¹‹å‰å°±äº†è§£è¿‡ï¼Œä½†å­˜åœ¨æ¨¡ç³Šçš„åœ°æ–¹ã€‚é¦–å…ˆé—®é¢˜åŸŸå’Œé¢†åŸŸç­‰ä»·ï¼Œä»£è¡¨è½¯ä»¶åº”ç”¨äºŸå¾…è§£å†³çš„é—®é¢˜ã€‚æ ¸å¿ƒåŸŸæ˜¯å®ƒä»¬çš„å­é›†ï¼Œå®ƒè‡³å…³é‡è¦ä¸”ä¸èƒ½è¢«å¤–éƒ¨ä¾èµ–æ›¿ä»£ï¼Œå¿…é¡»ç”±å¼€å‘è€…è§£å†³ã€‚å…¶æ¬¡ï¼Œä¸šåŠ¡é€»è¾‘ã€ä¸šåŠ¡è§„åˆ™ã€é¢†åŸŸé€»è¾‘ã€é¢†åŸŸçŸ¥è¯†å’Œé¢†åŸŸæ¨¡å‹æ˜¯ç­‰ä»·çš„ã€‚ä¸šåŠ¡é€»è¾‘æ˜¯ä½ ä½¿ç”¨ä»£ç è§£å†³é—®é¢˜åŸŸçš„æ–¹å¼ï¼Œä½¿ç”¨é¢†åŸŸæ¨¡å‹è¡¨è¾¾ã€‚

## é—®é¢˜æè¿°

â—æœºå™¨æŠ•å¸
â—æ‰¾é›¶
â—è´­ä¹°é›¶é£Ÿ
ç¬¬ä¸€ä¸ªé™ç•Œä¸Šä¸‹æ–‡ä¾¿æ˜¯è‡ªåŠ¨å”®è´§æœºï¼Œæ˜¾ç„¶ä¸Šè¿°ä¸‰ä¸ªåŠŸèƒ½æ˜¯æœ€åŸºç¡€çš„ï¼Œåé¢çš„ç« èŠ‚å°†ä¼šå¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚

## è‡ªåŠ¨å”®è´§æœº

ä»¥æ ¸å¿ƒåŸŸå¼€å§‹å¼€å‘â€”â€”è‡ªåŠ¨å”®è´§æœºæ¨¡å‹ã€‚é¦–å…ˆåˆ›å»ºSpring boot mavené¡¹ç›®ï¼š


```java
package com.potato.springbootddd.snackmachine;

import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public final class SnackMachine {
    private int oneCentCount;
    private int tenCentCount;
    private int quarterCount;
    private int oneDollarCount;
    private int fiveDollarCount;
    private int twentyDollarCount;

    public void insertMoney(int oneCentCount,
                            int tenCentCount,
                            int quarterCount,
                            int oneDollarCount,
                            int fiveDollarCount,
                            int twentyDollarCount) {
        oneCentCount += oneCentCount;
        tenCentCount += tenCentCount;
        quarterCount += quarterCount;
        oneDollarCount += oneDollarCount;
        fiveDollarCount += fiveDollarCount;
        twentyDollarCount += twentyDollarCount;
    }

    public void returnMoney() {
    }

}
```

ğŸ‘†æ³¨æ„ï¼Œæ­¤ç±»ä½¿ç”¨finalä¿®é¥°ç¬¦é™å®šã€‚æˆ‘ä»¬ä½¿ç”¨å­—æ®µè®°å½•å½“å‰å”®è´§æœºé‡‘é¢ï¼Œå¹¶ä¸”å¼•å…¥insertMoneyæŠ•å¸ã€returnMoneyé€€å¸ã€buySnackè´­ä¹°é›¶é£ŸåŠŸèƒ½ã€‚å¯¹SnackMachineç±»è¿›ä¸€æ­¥æ”¹é€ ï¼š

```java
@Getter
@Setter
public final class SnackMachine {
    private int oneCentCount;
    private int tenCentCount;
    private int quarterCount;
    private int oneDollarCount;
    private int fiveDollarCount;
    private int twentyDollarCount;


    private int oneCentCountInTransaction = 0;
    private int tenCentCountInTransaction = 0;
    private int quarterCountInTransaction = 0;
    private int oneDollarCountInTransaction = 0;
    private int fiveDollarCountInTransaction = 0;
    private int twentyDollarCountInTransaction = 0;

    public void insertMoney(int oneCentCount,
                            int tenCentCount,
                            int quarterCount,
                            int oneDollarCount,
                            int fiveDollarCount,
                            int twentyDollarCount) {
        oneCentCountInTransaction += oneCentCount;
        tenCentCountInTransaction += tenCentCount;
        quarterCountInTransaction += quarterCount;
        oneDollarCountInTransaction += oneDollarCount;
        fiveDollarCountInTransaction += fiveDollarCount;
        twentyDollarCountInTransaction += twentyDollarCount;

    }

    public void returnMoney() {
        oneCentCountInTransaction = 0;
        tenCentCountInTransaction = 0;
        quarterCountInTransaction = 0;
        oneDollarCountInTransaction = 0;
        fiveDollarCountInTransaction = 0;
        twentyDollarCountInTransaction = 0;
    }

    public void buySnack() {
        oneCentCount += oneCentCountInTransaction;
        tenCentCount += tenCentCountInTransaction;
        quarterCount += quarterCountInTransaction;
        oneDollarCount += oneDollarCountInTransaction;
        fiveDollarCount += fiveDollarCountInTransaction;
        twentyDollarCount += twentyDollarCountInTransaction;
        oneCentCountInTransaction = 0;
        tenCentCountInTransaction = 0;
        quarterCountInTransaction = 0;
        oneDollarCountInTransaction = 0;
        fiveDollarCountInTransaction = 0;
        twentyDollarCountInTransaction = 0;
    }
}
```

InTransactionå­—æ®µè¡¨ç¤ºç”¨æˆ·æŠ•å¸ï¼Œå½“ç”¨æˆ·è´­ä¹°é›¶é£Ÿæ—¶ï¼Œç”¨æˆ·æŠ•å¸å°†è¢«ç´¯åŠ åˆ°æœºå™¨è´¦æˆ·ï¼ŒæŠ•å¸ä¹Ÿå°†è¢«æ¸…é›¶ã€‚é›¶é£Ÿæœºçš„åŸºæœ¬åŠŸèƒ½å®ç°å¦‚ä¸Šï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥åšè¿›ä¸€æ­¥çš„æ”¹è¿›ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†é‡‘é¢å­—æ®µæŠ½è±¡äºä¸€ä¸ªç±»Moneyä¸­ï¼š

```java

public class Money {
    private int oneCentCount;
    private int tenCentCount;
    private int quarterCount;
    private int oneDollarCount;
    private int fiveDollarCount;
    private int twentyDollarCount;

    public Money(int oneCentCount, int tenCentCount, int quarterCount, int
            oneDollarCount, int fiveDollarCount, int twentyDollarCount) {
        this.oneCentCount = oneCentCount;
        this.tenCentCount = tenCentCount;
        this.quarterCount = quarterCount;
        this.oneDollarCount = oneDollarCount;
        this.fiveDollarCount = fiveDollarCount;
        this.twentyDollarCount = twentyDollarCount;
    }

    public static Money add(Money money1, Money money2) {
        return new Money(
                money1.oneCentCount + money2.oneCentCount,
                money1.tenCentCount + money2.tenCentCount,
                money1.quarterCount + money2.quarterCount,
                money1.oneDollarCount + money2.oneDollarCount,
                money1.fiveDollarCount + money2.fiveDollarCount,
                money1.twentyDollarCount + money2.twentyDollarCount);
    }
}
```

ä¸ä»…å¦‚æ­¤ï¼ŒMoneyç±»è¿˜å†…èšäº†addåŠ æ³•åŠŸèƒ½ï¼Œä»è€ŒSnackMachineç±»å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ï¼š